(()=>{"use strict";var t={426:(t,e,n)=>{n.d(e,{Z:()=>a});var r=n(81),o=n.n(r),i=n(645),s=n.n(i)()(o());s.push([t.id,"* {\n    margin: none;\n    padding: none;\n    box-sizing: border-box;\n    font-family: 'Courier New', Courier, monospace;\n}\n\nbody {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    width: 100vw;\n    height: 100vh;\n    gap: 30px;\n}\n\n.board-area {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    width: 40%;\n    height: 80%;\n    gap: 30px;\n}\n\n.boards {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100vw;\n    height: 70vh;\n    gap: 50px;\n}\n\n.board1, .board2 {\n    display: grid;\n    grid-template-rows: repeat(10, 1fr);\n    grid-template-columns: repeat(10, 1fr);\n    width: 80%;\n    height: 100%;\n}\n\n.p1-cell, .p2-cell {\n    background-color: rgb(228, 217, 217);\n    width: 100%;\n    height: 100%;\n    border: 1px solid grey;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 2vw;\n    color: grey;\n}\n\n.ship {\n    background-color: black;\n}\n\n.hit {\n    background-color: black;\n    font-weight: 900;\n}\n\n\n.miss {\n    color: grey;\n}\n\n.sunk {\n    background-color: red;\n    border: 1px solid red;\n}",""]);const a=s},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,r,o,i){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(r)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(s[l]=!0)}for(var c=0;c<t.length;c++){var d=[].concat(t[c]);r&&s[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),e.push(d))}},e}},81:t=>{t.exports=function(t){return t[1]}},379:t=>{var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},s=[],a=0;a<t.length;a++){var l=t[a],c=r.base?l[0]+r.base:l[0],d=i[c]||0,u="".concat(c," ").concat(d);i[c]=d+1;var h=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)e[h].references++,e[h].updater(p);else{var f=o(p,r);r.byIndex=a,e.splice(a,0,{identifier:u,updater:f,references:1})}s.push(u)}return s}function o(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,o){var i=r(t=t||[],o=o||{});return function(t){t=t||[];for(var s=0;s<i.length;s++){var a=n(i[s]);e[a].references--}for(var l=r(t,o),c=0;c<i.length;c++){var d=n(i[c]);0===e[d].references&&(e[d].updater(),e.splice(d,1))}i=l}}},569:t=>{var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},795:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={id:r,exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{var t=n(379),e=n.n(t),r=n(795),o=n.n(r),i=n(569),s=n.n(i),a=n(565),l=n.n(a),c=n(216),d=n.n(c),u=n(589),h=n.n(u),p=n(426),f={};f.styleTagTransform=h(),f.setAttributes=l(),f.insert=s().bind(null,"head"),f.domAPI=o(),f.insertStyleElement=d(),e()(p.Z,f),p.Z&&p.Z.locals&&p.Z.locals;const m={length:1},b={length:2},g={length:3},v={length:4};class y{constructor(t){this.length=t.length,this.tiles=[...Array(this.length).keys()],this.domTargets=[]}hit(t){return"hit"!==this.tiles[t]&&(this.tiles.splice(t,1,"hit"),"hit")}isSunk(){return!this.tiles.some((t=>"hit"!=t))}isHit(t){return"hit"===this.tiles[t]}}class x{constructor(){this.board=[];for(let t=0;t<10;t++){this.board[t]=[];for(let e=0;e<10;e++)this.board[t].push(!1)}}receiveAttack(t,e){return"miss"!==this.board[t][e]&&(this.board[t][e]&&"res"!==this.board[t][e]?!1!==this.board[t][e].ship.hit(this.board[t][e].i)&&"hit":(this.board[t].splice(e,1,"miss"),"miss"))}placeShip(t,e,n,r){let o=new y(n);if("h"===r){if(e+n.length>=10)return!1;for(let r=0;r<n.length;r++)if(this.board[t][e+r])return!1;for(let r=0;r<n.length;r++)this.board[t].splice(e+r,1,{ship:o,i:r}),this.reserveAround(t,e+r)}else if("v"===r){if(t+n.length>=10)return!1;for(let r=0;r<n.length;r++)if(this.board[t+r][e])return!1;for(let r=0;r<n.length;r++)this.board[t+r].splice(e,1,{ship:o,i:r}),this.reserveAround(t+r,e)}return!0}reserveAround(t,e){let n=[-1,-1,0,1,1,0,-1,1,-1];for(let r=0;r<8;r++){let o=t+n[r],i=e+n[r+1];o>=0&&i>=0&&o<10&&i<10&&!1===this.board[o][i]&&this.board[o].splice(i,1,"res")}}areAllSunk(){for(let t=0;t<10;t++)for(let e=0;e<10;e++)if(this.board[t][e]&&"miss"!==this.board[t][e]&&"res"!==this.board[t][e]&&(console.log(this.board[t][e].ship),!this.board[t][e].ship.isSunk()))return!1;return!0}checkIfAnyHitNearby(t,e){let n=[-1,-1,0,1,1,0,-1,1,-1];for(let r=0;r<8;r++){let o=t+n[r],i=e+n[r+1];if(o>=0&&i>=0&&o<10&&i<10){if(!this.board[o][i]||"res"===this.board[o][i]||"miss"===this.board[o][i])continue;if(this.board[o][i].ship.isHit(this.board[o][i].i))return!0}}return!1}}class w{constructor(t){this.name=t,this.board=new x,this.turn=!1}setTurn(t){this.turn=!0,t.turn=!1}attack(t,e){return this.board.receiveAttack(t,e)}randomPos(){return[Math.floor(10*Math.random()),Math.floor(10*Math.random())]}randomShip(t){let[e,n]=this.randomPos(),r=Math.round(Math.random());return r=0===r?"h":"v",this.board.placeShip(e,n,t,r)}randomFleet(){for(let t=0;t<2;t++){for(;!this.randomShip(m););for(;!this.randomShip(b););for(;!this.randomShip(g););for(;!this.randomShip(v););}}checkIfAnyHitNearby(t,e){return this.board.checkIfAnyHitNearby(t,e)}}let k,S,L=[],T=[],A=[],C=!1,E=[],M="",H=!1;function I(t,e,n,r){C=t,void 0!==e&&(H=e),void 0!==n&&(L=[n,r],0==T.length?T=[n,r]:0!==T.length&&0==A.length&&(A=[n,r]))}function q(t,e,n,r){if(r&&(L=[],T=[],A=[],C=!1,E=[],M="",H=!1),!C&&!H){let[n,r]=e.randomPos();for(;t.checkIfAnyHitNearby(n,r);)[n,r]=e.randomPos();return P(n,r,t,e)}if(0!==A.length&&C&&!n){let n;if(T[0]==A[0]-1&&(n=N("down")),T[0]==A[0]+1&&(n=N("up")),T[1]==A[1]-1&&(n=N("right")),T[1]==A[1]+1&&(n=N("left")),n[0]>=0&&n[0]<=9&&n[1]>=0&&n[1]<=9)return P(n[0],n[1],t,e)}else if(0!==A.length&&H&&!C){let n;if(L=T,A=[],"up"===M&&(n=N("down")),"down"===M&&(n=N("up")),"right"===M&&(n=N("left")),"left"===M&&(n=N("right")),n[0]>=0&&n[0]<=9&&n[1]>=0&&n[1]<=9)return P(n[0],n[1],t,e)}else if(H){0==E.length&&(o=L[0],i=L[1],E=[],0!==i&&E.push([o,i-1]),9!==i&&E.push([o,i+1]),0!==o&&E.push([o-1,i]),9!==o&&E.push([o+1,i]));let n=E.pop();return P(n[0],n[1],t,e)}var o,i}function N(t){return"left"===t?(M="left",[L[0],L[1]-1]):"right"===t?(M="right",[L[0],L[1]+1]):"down"===t?(M="down",[L[0]+1,L[1]]):"up"===t?(M="up",[L[0]-1,L[1]]):void 0}async function P(t,e,n,r){let o=n.attack(t,e),i=document.querySelector(`.p1-${t}-${e}`);if(o||q(n,r,!0),"miss"===o&&(i.classList.add("miss"),i.textContent="-",I(!1),n.setTurn(r)),"hit"===o){I(!0,!0,t,e),i.classList.add("hit"),i.textContent="X",n.board.board[t][e].ship.domTargets.push(i);let o=!1;return n.board.board[t][e].ship.isSunk()&&(n.board.board[t][e].ship.domTargets.forEach((t=>{t.classList.add("sunk")})),o=!0),n.board.areAllSunk()?F(r):(await $(1e3),q(n,r,!1,o))}}async function j(t,e,n,r,o){let i=o.attack(e,n);i&&("miss"===i&&(t.classList.add("miss"),t.textContent="-",o.setTurn(r),await $(1e3),q(r,o,!1)),"hit"===i&&(t.classList.add("hit"),t.textContent="X",o.board.board[e][n].ship.domTargets.push(t),o.board.board[e][n].ship.isSunk()&&o.board.board[e][n].ship.domTargets.forEach((t=>{t.classList.add("sunk")})),o.board.areAllSunk()&&F(r)))}function $(t){return new Promise((e=>{setTimeout((()=>{e(2)}),t)}))}function F(t){document.querySelector(".result").textContent=t.name+" won!!!",document.querySelectorAll(".p2-cell").forEach((t=>t.classList.add("disable")))}function Z(){document.querySelector(".result").textContent="You vs Enemy",document.querySelectorAll(".p2-cell").forEach((t=>t.classList.remove("disable"))),O()}function O(){k=new w("You"),S=new w("Enemy"),k.setTurn(S),k.randomFleet(),S.randomFleet(),document.querySelector(".reset-btn").addEventListener("click",Z),function(t,e){const n=document.querySelector(".board1"),r=document.querySelector(".board2");n.innerHTML="",r.innerHTML="";for(let o=0;o<10;o++)for(let i=0;i<10;i++){let s=document.createElement("div");s.classList.add("p1-cell"),s.classList.add(`p1-${o}-${i}`),"object"==typeof t.board.board[o][i]&&s.classList.add("ship"),n.appendChild(s);let a=document.createElement("div");a.classList.add("p2-cell"),a.classList.add(`p2-${o}-${i}`),a.addEventListener("click",(n=>{t.turn&&!n.target.classList.contains("disable")&&j(n.target,o,i,t,e)})),r.appendChild(a)}}(k,S)}O()})()})();